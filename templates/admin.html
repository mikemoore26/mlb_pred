{% extends "base.html" %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Admin</h1>

<form method="post" class="space-y-4 max-w-xl mb-8">
  <div>
    <label for="model_path" class="block text-sm font-medium text-slate-700 mb-1">
      Select Model for Predictions
    </label>
    <select id="model_path" name="model_path" class="w-full border rounded p-2 bg-white">
      {% for m in models %}
        <option value="{{ m.value }}" {% if m.value == selected_path %}selected{% endif %}>
          {{ m.label }}
        </option>
      {% endfor %}
    </select>
  </div>

  <button type="submit" class="px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800">
    Save
  </button>
</form>

<h2 class="text-lg font-semibold mb-3">All Models</h2>
<div class="overflow-x-auto">
  <table class="w-full text-left text-sm">
    <thead>
      <tr class="text-slate-600 border-b">
        <th class="py-2 pr-4">Selected</th>
        <th class="py-2 pr-4">Filename</th>
        <th class="py-2 pr-4">Name</th>
        <th class="py-2 pr-4">Variant</th>
        <th class="py-2 pr-4">Created</th>
        <th class="py-2 pr-4">Report Preview</th>
      </tr>
    </thead>
    <tbody>
      {% for r in table_rows %}
      <tr class="border-b align-top {% if r.is_selected %}bg-amber-50{% endif %}">
        <td class="py-2 pr-4">
          {% if r.is_selected %}
            <span class="inline-block px-2 py-0.5 text-xs rounded bg-amber-200 text-amber-900">Using</span>
          {% else %}
            <span class="text-slate-400">—</span>
          {% endif %}
        </td>
        <td class="py-2 pr-4 font-medium">{{ r.filename }}</td>
        <td class="py-2 pr-4">{{ r.name or "—" }}</td>
        <td class="py-2 pr-4">{{ r.variant or "—" }}</td>
        <td class="py-2 pr-4">{{ r.created or "—" }}</td>
        <td class="py-2 pr-4">
          <pre class="bg-slate-100 p-3 rounded whitespace-pre-wrap">{{ r.report_preview }}</pre>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div>
    <p>The two models for predicting MLB match winners, Full Model ML1 (utilizing Logistic Regression with Isolation) and Full Model ML2 (employing Gradient Boosted Decision Trees with Isolation), share identical training windows from March 28, 2024, to August 12, 2025, and dataset sizes with 3,989 training samples and 746 validation samples, allowing for a direct apples-to-apples comparison. However, ML1 outperforms ML2 in key validation metrics, achieving an accuracy of 0.584 and balanced accuracy of 0.578 compared to ML2's lower scores of 0.554 and 0.524, respectively, suggesting that the simpler logistic regression approach may better capture the underlying patterns in the data without overfitting, while the more complex gradient boosting method could be suffering from higher variance or less effective handling of class imbalances in this context. Based on these results, I recommend using ML1 for deployment, as its superior accuracy and balanced accuracy indicate greater reliability in predicting winners across potentially imbalanced home/away or favorite/underdog scenarios typical in MLB games. To improve both models, consider incorporating additional features like player-specific stats (e.g., recent batting averages or pitching ERAs), weather conditions, or venue effects through feature engineering; perform hyperparameter tuning via grid search or Bayesian optimization to optimize model parameters; collect more recent data to expand the training set and reduce potential temporal biases; or experiment with ensemble techniques, such as stacking ML1 and ML2 together, to leverage their strengths and further boost overall performance.</p>
  </div>
</div>
{% endblock %}
