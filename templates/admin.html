{% extends "base.html" %}
{% block content %}
<h1 class="text-xl font-semibold mb-4">Admin</h1>

<form method="post" class="space-y-4 max-w-xl mb-8">
  <div>
    <label for="model_path" class="block text-sm font-medium text-slate-700 mb-1">
      Select Model for Predictions
    </label>
    <select id="model_path" name="model_path" class="w-full border rounded p-2 bg-white">
      {% for m in models %}
        <option value="{{ m.value }}" {% if m.value == selected_path %}selected{% endif %}>
          {{ m.label }}
        </option>
      {% endfor %}
    </select>
  </div>

  <button type="submit" class="px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800">
    Save
  </button>
</form>

<h2 class="text-lg font-semibold mb-3">All Models</h2>
<div class="overflow-x-auto">
  <table class="w-full text-left text-sm">
    <thead>
      <tr class="text-slate-600 border-b">
        <th class="py-2 pr-4">Selected</th>
        <th class="py-2 pr-4">Filename</th>
        <th class="py-2 pr-4">Name</th>
        <th class="py-2 pr-4">Variant</th>
        <th class="py-2 pr-4">Created</th>
        <th class="py-2 pr-4">Report Preview</th>
      </tr>
    </thead>
    <tbody>
      {% for r in table_rows %}
      <tr class="border-b align-top {% if r.is_selected %}bg-amber-50{% endif %}">
        <td class="py-2 pr-4">
          {% if r.is_selected %}
            <span class="inline-block px-2 py-0.5 text-xs rounded bg-amber-200 text-amber-900">Using</span>
          {% else %}
            <span class="text-slate-400">—</span>
          {% endif %}
        </td>
        <td class="py-2 pr-4 font-medium">{{ r.filename }}</td>
        <td class="py-2 pr-4">{{ r.name or "—" }}</td>
        <td class="py-2 pr-4">{{ r.variant or "—" }}</td>
        <td class="py-2 pr-4">{{ r.created or "—" }}</td>
        <td class="py-2 pr-4">
          <pre class="bg-slate-100 p-3 rounded whitespace-pre-wrap">{{ r.report_preview }}</pre>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
